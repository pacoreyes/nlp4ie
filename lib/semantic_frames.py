import requests


def api_get_frames(sent, ip, port, output_type="all"):
  """
  Get frames for a sentence from the FrameNet API
  :param sent: sentence to analyze
  :param ip: IP address
  :param port: port number
  :param output_type: "all" or "graph"
  :return: {"frames": parsed}
  """
  response = {}
  if output_type == "all":
    response = requests.get(f"http://{ip}:{port}/api/extract_frames/" + sent)
  elif output_type == "graph":
    response = requests.get(f"http://{ip}:{port}/api/extract_frames_graph/" + sent)
  return response.json()


def encode_sentence_frames(parsed_frames):
  """
  Encode the frames present in a sentence as a one-hot vector
  :param parsed_frames: frames parsed from the FrameNet API
  :return:
  """
  # Get the frame names
  present_frame_names = [frame["obj"] for frame in parsed_frames["frames"]["textae"] for frame in
                         frame["denotations"]]
  # Initialize a one-hot encoded vector with zeros, based on the global list of frame names
  encoded_vector = [0] * len(frame_names)

  # Set positions to 1 for frames present in the sentence
  for frame_name in present_frame_names:
    if frame_name in frame_index:
      encoded_vector[frame_index[frame_name]] = 1
  return encoded_vector


def decode_frame_vector(encoded_vector):
  """
  Decode a one-hot encoded vector of frames
  :param encoded_vector:
  :return: decoded frame names
  """
  # Identify indices with a value of 1
  present_indices = [index for index, value in enumerate(encoded_vector) if value == 1]

  # Map indices back to frame names using the inverse of frame_index
  # Assuming frame_index is globally defined as before
  index_frame = {index: frame for frame, index in frame_index.items()}

  # Decode the frame names
  decoded_frame_names = [index_frame[index] for index in present_indices if index in index_frame]

  return decoded_frame_names


frame_names = [
  'Abandonment',
  'Abounding_with',
  'Absorb_heat',
  'Abundance',
  'Abusing',
  'Accompaniment',
  'Accomplishment',
  'Accoutrements',
  'Accuracy',
  'Achieving_first',
  'Active_substance',
  'Activity_finish',
  'Activity_ongoing',
  'Activity_pause',
  'Activity_prepare',
  'Activity_ready_state',
  'Activity_resume',
  'Activity_start',
  'Activity_stop',
  'Actually_occurring_entity',
  'Addiction',
  'Adding_up',
  'Adducing',
  'Adjacency',
  'Adjusting',
  'Adopt_selection',
  'Aesthetics',
  'Affirm_or_deny',
  'Age',
  'Aggregate',
  'Aging',
  'Agree_or_refuse_to_act',
  'Agriculture',
  'Aiming',
  'Alliance',
  'Alternatives',
  'Amalgamation',
  'Amassing',
  'Ambient_temperature',
  'Ammunition',
  'Amounting_to',
  'Animals',
  'Annoyance',
  'Appeal',
  'Appellations',
  'Apply_heat',
  'Appointing',
  'Architectural_part',
  'Armor',
  'Arranging',
  'Arrest',
  'Arriving',
  'Artifact',
  'Artificiality',
  'Assemble',
  'Assessing',
  'Assigned_location',
  'Assistance',
  'Attaching',
  'Attack',
  'Attempt',
  'Attempt_means',
  'Attempt_obtain_food_scenario',
  'Attempt_suasion',
  'Attending',
  'Attention',
  'Attitude_description',
  'Attributed_information',
  'Authority',
  'Avoiding',
  'Awareness',
  'Awareness_status',
  'Bail_decision',
  'Be_in_agreement_on_action',
  'Be_in_agreement_on_assessment',
  'Be_on_alert',
  'Bearing_arms',
  'Beat_opponent',
  'Becoming',
  'Becoming_a_member',
  'Becoming_attached',
  'Becoming_aware',
  'Becoming_separated',
  'Behind_the_scenes',
  'Being_active',
  'Being_at_risk',
  'Being_attached',
  'Being_detached',
  'Being_employed',
  'Being_in_captivity',
  'Being_in_category',
  'Being_in_control',
  'Being_in_effect',
  'Being_incarcerated',
  'Being_located',
  'Being_named',
  'Being_necessary',
  'Being_obligated',
  'Being_obligatory',
  'Being_operational',
  'Being_questionable',
  'Being_relevant',
  'Being_up_to_it',
  'Besieging',
  'Beyond_compare',
  'Biological_area',
  'Biological_classification',
  'Biological_entity',
  'Biological_mechanisms',
  'Biological_urge',
  'Board_vehicle',
  'Body_decoration',
  'Body_description_holistic',
  'Body_mark',
  'Body_movement',
  'Body_parts',
  'Borrowing',
  'Boundary',
  'Bragging',
  'Breaking_off',
  'Breaking_out_captive',
  'Breathing',
  'Bringing',
  'Building',
  'Building_subparts',
  'Buildings',
  'Bungling',
  'Burying',
  'Businesses',
  'Calendric_unit',
  'Candidness',
  'Capability',
  'Capital_stock',
  'Cardinal_numbers',
  'Carry_goods',
  'Catastrophe',
  'Catching_fire',
  'Categorization',
  'Causation',
  'Cause_bodily_experience',
  'Cause_change',
  'Cause_change_of_consistency',
  'Cause_change_of_phase',
  'Cause_change_of_position_on_a_scale',
  'Cause_change_of_strength',
  'Cause_emotion',
  'Cause_expansion',
  'Cause_fluidic_motion',
  'Cause_harm',
  'Cause_impact',
  'Cause_motion',
  'Cause_proliferation_in_number',
  'Cause_temperature_change',
  'Cause_to_amalgamate',
  'Cause_to_be_dry',
  'Cause_to_be_included',
  'Cause_to_be_sharp',
  'Cause_to_be_wet',
  'Cause_to_continue',
  'Cause_to_end',
  'Cause_to_experience',
  'Cause_to_fragment',
  'Cause_to_make_noise',
  'Cause_to_make_progress',
  'Cause_to_move_in_place',
  'Cause_to_perceive',
  'Cause_to_resume',
  'Cause_to_start',
  'Cause_to_wake',
  'Ceasing_to_be',
  'Certainty',
  'Change_accessibility',
  'Change_direction',
  'Change_event_duration',
  'Change_event_time',
  'Change_of_consistency',
  'Change_of_leadership',
  'Change_of_quantity_of_possession',
  'Change_of_temperature',
  'Change_position_on_a_scale',
  'Change_post-state',
  'Change_posture',
  'Chaos',
  'Chatting',
  'Chemical-sense_description',
  'Chemical_potency',
  'Choosing',
  'Circumscribed_existence',
  'Claim_ownership',
  'Closure',
  'Clothing',
  'Clothing_parts',
  'Co-association',
  'Cogitation',
  'Cognitive_connection',
  'Cognitive_impact',
  'Coincidence',
  'Collaboration',
  'Colonization',
  'Color',
  'Color_qualities',
  'Come_down_with',
  'Come_together',
  'Coming_to_be',
  'Coming_to_believe',
  'Coming_up_with',
  'Commerce_buy',
  'Commerce_pay',
  'Commerce_scenario',
  'Commerce_sell',
  'Commercial_transaction',
  'Commitment',
  'Committing_crime',
  'Commonality',
  'Communicate_categorization',
  'Communication',
  'Communication_manner',
  'Communication_noise',
  'Communication_response',
  'Commutative_process',
  'Commutative_statement',
  'Compatibility',
  'Competition',
  'Complaining',
  'Completeness',
  'Compliance',
  'Condition_symptom_relation',
  'Conduct',
  'Conferring_benefit',
  'Confronting_problem',
  'Connecting_architecture',
  'Connectors',
  'Conquering',
  'Contacting',
  'Containers',
  'Containing',
  'Contingency',
  'Contrition',
  'Control',
  'Convey_importance',
  'Convoy',
  'Cooking_creation',
  'Correctness',
  'Corroding_caused',
  'Cotheme',
  'Court_examination',
  'Craft',
  'Create_physical_artwork',
  'Create_representation',
  'Creating',
  'Criminal_investigation',
  'Cure',
  'Custom',
  'Cutting',
  'Damaging',
  'Daring',
  'Dead_or_alive',
  'Death',
  'Deciding',
  'Defending',
  'Degree',
  'Degree_of_processing',
  'Delimitation_of_diversity',
  'Delivery',
  'Deny_or_grant_permission',
  'Departing',
  'Deserving',
  'Desirability',
  'Desiring',
  'Destiny',
  'Destroying',
  'Detaining',
  'Differentiation',
  'Difficulty',
  'Dimension',
  'Direction',
  'Directional_locative_relation',
  'Discussion',
  'Disgraceful_situation',
  'Dispersal',
  'Distinctiveness',
  'Distributed_position',
  'Diversity',
  'Documents',
  'Dominate_competitor',
  'Dominate_situation',
  'Downing',
  'Dressing',
  'Duplication',
  'Duration_description',
  'Duration_relation',
  'Dynamism',
  'Earnings_and_losses',
  'Eclipse',
  'Economy',
  'Education_teaching',
  'Electricity',
  'Elusive_goal',
  'Emanating',
  'Emergency',
  'Emergency_fire',
  'Emitting',
  'Emotion_active',
  'Emotion_directed',
  'Emotion_heat',
  'Emotions_by_stimulus',
  'Emotions_of_mental_activity',
  'Emotions_success_or_failure',
  'Emphasizing',
  'Employing',
  'Emptying',
  'Encoding',
  'Endangering',
  'Endeavor_failure',
  'Enforcing',
  'Entity',
  'Erasing',
  'Escaping',
  'Estimated_value',
  'Estimating',
  'Evading',
  'Evaluative_comparison',
  'Event',
  'Event_instance',
  'Eventive_affecting',
  'Evidence',
  'Evoking',
  'Examination',
  'Exchange',
  'Exchange_currency',
  'Exclude_member',
  'Execute_plan',
  'Execution',
  'Exemplar',
  'Exemplariness',
  'Exercising',
  'Existence',
  'Expansion',
  'Expectation',
  'Expend_resource',
  'Expensiveness',
  'Experience_bodily_harm',
  'Experiencer_focus',
  'Experiencer_obj',
  'Experimentation',
  'Expertise',
  'Explaining_the_facts',
  'Explosion',
  'Exporting',
  'Expressing_publicly',
  'Extradition',
  'Extreme_value',
  'Facial_expression',
  'Fairness_evaluation',
  'Fall_for',
  'Fame',
  'Familiarity',
  'Fear',
  'Feeling',
  'Feigning',
  'Fields',
  'Filling',
  'Fining',
  'Finish_competition',
  'Fire_burning',
  'Firefighting',
  'Firing',
  'First_rank',
  'Fleeing',
  'Fluidic_motion',
  'Food',
  'Food_gathering',
  'Foreign_or_domestic_country',
  'Forging',
  'Forgiveness',
  'Forgoing',
  'Forming_relationships',
  'Frequency',
  'Friendly_or_hostile',
  'Front_for',
  'Frugality',
  'Fugitive',
  'Fullness',
  'Function',
  'Funding',
  'Gathering_up',
  'Gesture',
  'Getting',
  'Give_impression',
  'Giving',
  'Giving_birth',
  'Giving_in',
  'Gizmo',
  'Going_back_on_a_commitment',
  'Gradable_artistic_quality',
  'Gradable_proximity',
  'Graph_shape',
  'Grasp',
  'Grinding',
  'Grooming',
  'Growing_food',
  'Guest_and_host',
  'Guilt_or_innocence',
  'Gusto',
  'Hair_configuration',
  'Halt',
  'Have_as_requirement',
  'Have_associated',
  'Having_or_lacking_access',
  'Health_response',
  'Hearsay',
  'Hedging',
  'Hiding_objects',
  'Hindering',
  'Hiring',
  'Historic_event',
  'History',
  'Hit_or_miss',
  'Hit_target',
  'Holding_off_on',
  'Hospitality',
  'Hostile_encounter',
  'Hunting',
  'Identicality',
  'Idiosyncrasy',
  'Impact',
  'Import_export_scenario',
  'Importance',
  'Importing',
  'Imposing_obligation',
  'Impression',
  'Imprisonment',
  'Improvement_or_decline',
  'Inclination',
  'Inclusion',
  'Increment',
  'Indicating',
  'Indigenous_origin',
  'Individual_history',
  'Ineffability',
  'Infecting',
  'Information',
  'Information_display',
  'Infrastructure',
  'Ingest_substance',
  'Ingestion',
  'Ingredients',
  'Inhibit_movement',
  'Inspecting',
  'Instance',
  'Institutionalization',
  'Institutions',
  'Intentional_traversing',
  'Intentionally_act',
  'Intentionally_create',
  'Intercepting',
  'Interrupt_process',
  'Intoxicants',
  'Intoxication',
  'Invading',
  'Irregular_combatants',
  'Isolated_places',
  'Judgment',
  'Judgment_communication',
  'Judgment_direct_address',
  'Judgment_of_intensity',
  'Judicial_body',
  'Just_found_out',
  'Justifying',
  'Kidnapping',
  'Killing',
  'Kinship',
  'Knot_creation',
  'Labeling',
  'Labor_product',
  'Launch_process',
  'Law',
  'Law_enforcement_agency',
  'Leadership',
  'Leaving_traces',
  'Left_to_do',
  'Legal_rulings',
  'Legality',
  'Lending',
  'Level_of_force_exertion',
  'Level_of_force_resistance',
  'Level_of_light',
  'Light_movement',
  'Likelihood',
  'Limitation',
  'Limiting',
  'Linguistic_meaning',
  'Lively_place',
  'Living_conditions',
  'Locale',
  'Locale_by_characteristic_entity',
  'Locale_by_collocation',
  'Locale_by_event',
  'Locale_by_ownership',
  'Locale_by_use',
  'Locale_closure',
  'Locating',
  'Location_in_time',
  'Location_of_light',
  'Locative_relation',
  'Losing',
  'Losing_someone',
  'Luck',
  'Make_acquaintance',
  'Make_agreement_on_action',
  'Make_cognitive_connection',
  'Make_compromise',
  'Make_noise',
  'Making_arrangements',
  'Making_faces',
  'Manipulate_into_doing',
  'Manipulation',
  'Manner',
  'Manner_of_life',
  'Manufacturing',
  'Margin_of_resolution',
  'Mass_motion',
  'Mathematical_relationship',
  'Means',
  'Measurable_attributes',
  'Measure_area',
  'Measure_by_action',
  'Measure_duration',
  'Measure_linear_extent',
  'Measure_mass',
  'Measure_volume',
  'Medical_conditions',
  'Medical_interaction_scenario',
  'Medical_intervention',
  'Medical_professionals',
  'Medical_specialties',
  'Meet_specifications',
  'Meet_with_response',
  'Member_of_military',
  'Membership',
  'Memory',
  'Mental_property',
  'Mental_stimulus_exp_focus',
  'Mental_stimulus_stimulus_focus',
  'Mention',
  'Military',
  'Military_operation',
  'Mining',
  'Misdeed',
  'Money',
  'Morality_evaluation',
  'Motion',
  'Motion_directional',
  'Moving_in_place',
  'Name_conferral',
  'Natural_features',
  'Needing',
  'Network',
  'Noise_makers',
  'Non-commutative_process',
  'Non-gradable_proximity',
  'Noncombatant',
  'Notability',
  'Notification_of_charges',
  'Nuclear_process',
  'Objective_influence',
  'Obscurity',
  'Obviousness',
  'Occupy_rank',
  'Offenses',
  'Offering',
  'Offshoot',
  'Omen',
  'Ontogeny',
  'Openness',
  'Operate_vehicle',
  'Operating_a_system',
  'Operational_testing',
  'Opinion',
  'Opportunity',
  'Optical_image',
  'Ordinal_numbers',
  'Organization',
  'Origin',
  'Pardon',
  'Part_edge',
  'Part_inner_outer',
  'Part_ordered_segments',
  'Part_orientational',
  'Part_piece',
  'Part_whole',
  'Partiality',
  'Participation',
  'Path_shape',
  'Path_traveled',
  'Patrolling',
  'Pattern',
  'People',
  'People_along_political_spectrum',
  'People_by_age',
  'People_by_jurisdiction',
  'People_by_morality',
  'People_by_origin',
  'People_by_residence',
  'People_by_vocation',
  'Perception_active',
  'Perception_body',
  'Perception_experience',
  'Performers',
  'Performers_and_roles',
  'Performing_arts',
  'Personal_relationship',
  'Personal_success',
  'Physical_artworks',
  'Piracy',
  'Placing',
  'Planned_trajectory',
  'Planting',
  'Plants',
  'Point_of_dispute',
  'Political_locales',
  'Popularity',
  'Posing_as',
  'Position_on_a_scale',
  'Possession',
  'Posture',
  'Practice',
  'Praiseworthiness',
  'Precariousness',
  'Precipitation',
  'Predicament',
  'Predicting',
  'Preference',
  'Preliminaries',
  'Presence',
  'Preserving',
  'Prevarication',
  'Prevent_or_allow_possession',
  'Preventing_or_letting',
  'Price_per_unit',
  'Prison',
  'Probability',
  'Process',
  'Process_continue',
  'Process_end',
  'Process_resume',
  'Process_start',
  'Process_stop',
  'Processing_materials',
  'Product_development',
  'Product_line',
  'Progression',
  'Prohibiting_or_licensing',
  'Project',
  'Proliferating_in_number',
  'Prominence',
  'Proper_reference',
  'Proportion',
  'Protecting',
  'Protest',
  'Provide_lodging',
  'Public_services',
  'Publishing',
  'Punctual_perception',
  'Purpose',
  'Putting_out_fire',
  'Quantified_mass',
  'Quantity',
  'Quarreling',
  'Questioning',
  'Quitting',
  'Quitting_a_place',
  'Range',
  'Rank',
  'Ranked_expectation',
  'Rape',
  'Rashness',
  'Rate_description',
  'Rate_quantification',
  'Ratification',
  'Reading_activity',
  'Reading_aloud',
  'Reading_perception',
  'Reason',
  'Reasoning',
  'Reassuring',
  'Rebellion',
  'Receiving',
  'Recording',
  'Records',
  'Recovery',
  'Redirecting',
  'Referring_by_name',
  'Reforming_a_system',
  'Regard',
  'Rejuvenation',
  'Relating_concepts',
  'Relation',
  'Relational_natural_features',
  'Relational_political_locales',
  'Relational_quantity',
  'Relative_time',
  'Releasing',
  'Reliance',
  'Religious_belief',
  'Remainder',
  'Remembering_experience',
  'Remembering_information',
  'Removing',
  'Render_nonfunctional',
  'Renting_out',
  'Renunciation',
  'Reparation',
  'Repayment',
  'Repel',
  'Replacing',
  'Representative',
  'Representing',
  'Request',
  'Request_entity',
  'Required_event',
  'Rescuing',
  'Research',
  'Reserving',
  'Reshaping',
  'Residence',
  'Resolve_problem',
  'Respond_to_proposal',
  'Response',
  'Responsibility',
  'Rest',
  'Resurrection',
  'Retaining',
  'Reveal_secret',
  'Revenge',
  'Rewards_and_punishments',
  'Ride_vehicle',
  'Risky_situation',
  'Rite',
  'Roadways',
  'Robbery',
  'Rotting',
  'Run_risk',
  'Scarcity',
  'Scheduling',
  'Scope',
  'Scouring',
  'Scrutiny',
  'Secrecy_status',
  'Seeking',
  'Seeking_to_achieve',
  'Self_control',
  'Self_motion',
  'Sending',
  'Sensation',
  'Sent_items',
  'Sentencing',
  'Separating',
  'Sequence',
  'Serving_in_capacity',
  'Setting_fire',
  'Severity_of_offense',
  'Sex',
  'Shapes',
  'Sharpness',
  'Shoot_projectiles',
  'Sidereal_appearance',
  'Sign',
  'Sign_agreement',
  'Silencing',
  'Similarity',
  'Simple_name',
  'Simple_naming',
  'Simultaneity',
  'Size',
  'Sleep',
  'Smuggling',
  'Soaking_up',
  'Sociability',
  'Social_connection',
  'Social_desirability',
  'Social_event',
  'Social_interaction_evaluation',
  'Sole_instance',
  'Sound_level',
  'Sound_movement',
  'Sounds',
  'Source_of_getting',
  'Spatial_contact',
  'Speak_on_topic',
  'Specific_individual',
  'Speed_description',
  'Spelling_and_pronouncing',
  'Stage_of_progress',
  'State_continue',
  'State_of_entity',
  'Statement',
  'Stimulus_focus',
  'Stinginess',
  'Store',
  'Storing',
  'Strictness',
  'Studying',
  'Suasion',
  'Subjective_influence',
  'Submitting_documents',
  'Subordinates_and_superiors',
  'Substance',
  'Substance_by_phase',
  'Subversion',
  'Success_or_failure',
  'Successful_action',
  'Successfully_communicate_message',
  'Sufficiency',
  'Suitability',
  'Summarizing',
  'Supply',
  'Supporting',
  'Surpassing',
  'Surrendering',
  'Surrendering_possession',
  'Surrounding',
  'Surviving',
  'Suspicion',
  'System',
  'System_complexity',
  'Take_place_of',
  'Taking',
  'Taking_captive',
  'Taking_sides',
  'Taking_time',
  'Talking_into',
  'Telling',
  'Temperature',
  'Temporal_collocation',
  'Temporal_pattern',
  'Temporal_subregion',
  'Temporary_group',
  'Temporary_leave',
  'Temporary_stay',
  'Terms_of_agreement',
  'Terrorism',
  'Text',
  'Text_creation',
  'Theft',
  'Thermodynamic_phase',
  'Thriving',
  'Thwarting',
  'Time_vector',
  'Timespan',
  'Timetable',
  'Tolerating',
  'Tool_purpose',
  'Topic',
  'Touring',
  'Toxic_substance',
  'Transfer',
  'Transition_to_a_quality',
  'Transition_to_state',
  'Translating',
  'Trap',
  'Travel',
  'Traversing',
  'Trendiness',
  'Trial',
  'Triggering',
  'Trust',
  'Try_defendant',
  'Trying_out',
  'Turning_out',
  'Type',
  'Typicality',
  'Unattributed_information',
  'Undergo_change',
  'Undergo_transformation',
  'Undergoing',
  'Undressing',
  'Unemployment_rate',
  'Use_firearm',
  'Used_up',
  'Usefulness',
  'Using',
  'Using_resource',
  'Vehicle',
  'Vehicle_landing',
  'Vehicle_subpart',
  'Verdict',
  'Verification',
  'Version_sequence',
  'Violence',
  'Visiting',
  'Vocalizations',
  'Volubility',
  'Wagering',
  'Waiting',
  'Waking_up',
  'Want_suspect',
  'Warning',
  'Waver_between_options',
  'Wealthiness',
  'Weapon',
  'Wearing',
  'Weather',
  'Willingness',
  'Win_prize',
  'Withdraw_from_participation',
  'Word_relations',
  'Work',
  'Working_a_post'
]

frame_index = {frame_name: index for index, frame_name in enumerate(frame_names)}

# Assuming frame_names is a list of frame names ordered by their indices
index_frame = {index: frame_name for index, frame_name in enumerate(frame_names)}
