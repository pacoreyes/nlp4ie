import requests


def api_get_frames(sent, ip, port, output_type="all"):
  """
  Get frames for a sentence from the FrameNet API
  :param sent: sentence to analyze
  :param ip: IP address
  :param port: port number
  :param output_type: "all" or "graph"
  :return: {"frames": parsed}
  """
  response = {}
  if output_type == "all":
    response = requests.get(f"http://{ip}:{port}/api/extract_frames/" + sent)
  elif output_type == "graph":
    response = requests.get(f"http://{ip}:{port}/api/extract_frames_graph/" + sent)
  return response.json()


def encode_sentence_frames(parsed_frames):
  """
  Encode the frames present in a sentence as a one-hot vector
  :param parsed_frames: frames parsed from the FrameNet API
  :return:
  """
  # Get the frame names TODO: remove if not needed
  """present_frame_names = [frame["obj"] for frame in parsed_frames["frames"]["textae"] for frame in
                         frame["denotations"]]"""

  frames = parsed_frames["frames"]["textae"]
  present_frame_names = []

  for frame in frames:
   for idx, f in enumerate(frame["denotations"]):
    if idx == 0:
     present_frame_names.append(f["obj"])

  # Initialize a one-hot encoded vector with zeros, based on the global list of frame names
  encoded_vector = [0] * len(frame_names)

  # Set positions to 1 for frames present in the sentence
  for frame_name in present_frame_names:
    if frame_name in frame_index:
      encoded_vector[frame_index[frame_name]] = 1
  return encoded_vector


def decode_frame_vector(_encoded_vector):
  """
  Decode a one-hot encoded vector of frames
  :param _encoded_vector:
  :return: decoded frame names
  """
  # Identify indices with a value of 1
  _present_indices = [index for index, value in enumerate(_encoded_vector) if value == 1]

  # Map indices back to frame names using the inverse of frame_index
  # Assuming frame_index is globally defined as before
  _index_frame = {index: frame for frame, index in frame_index.items()}

  # Decode the frame names
  _decoded_frame_names = [_index_frame[index] for index in _present_indices if index in _index_frame]

  return _decoded_frame_names


frame_names = [
 'Abandonment',
 'Absorb_heat',
 'Abusing',
 'Accomplishment',
 'Accuracy',
 'Activity_finish',
 'Activity_ongoing',
 'Activity_pause',
 'Activity_prepare',
 'Activity_ready_state',
 'Activity_resume',
 'Activity_start',
 'Activity_stop',
 'Actually_occurring_entity',
 'Adopt_selection',
 'Aesthetics',
 'Affirm_or_deny',
 'Age',
 'Aggregate',
 'Agree_or_refuse_to_act',
 'Aiming',
 'Alliance',
 'Alternatives',
 'Amalgamation',
 'Ambient_temperature',
 'Ammunition',
 'Amounting_to',
 'Animals',
 'Appeal',
 'Appellations',
 'Appointing',
 'Architectural_part',
 'Arranging',
 'Arrest',
 'Arriving',
 'Artifact',
 'Assessing',
 'Assistance',
 'Attaching',
 'Attack',
 'Attempt',
 'Attempt_suasion',
 'Attention',
 'Attitude_description',
 'Authority',
 'Avoiding',
 'Awareness',
 'Awareness_status',
 'Be_in_agreement_on_action',
 'Be_on_alert',
 'Bearing_arms',
 'Beat_opponent',
 'Becoming',
 'Becoming_a_member',
 'Becoming_aware',
 'Behind_the_scenes',
 'Being_active',
 'Being_at_risk',
 'Being_employed',
 'Being_in_control',
 'Being_named',
 'Being_necessary',
 'Being_obligated',
 'Being_operational',
 'Being_up_to_it',
 'Besieging',
 'Biological_entity',
 'Biological_urge',
 'Body_decoration',
 'Body_movement',
 'Body_parts',
 'Boundary',
 'Bringing',
 'Building',
 'Building_subparts',
 'Buildings',
 'Burying',
 'Businesses',
 'Calendric_unit',
 'Candidness',
 'Capability',
 'Capital_stock',
 'Cardinal_numbers',
 'Carry_goods',
 'Catastrophe',
 'Categorization',
 'Causation',
 'Cause_change',
 'Cause_change_of_consistency',
 'Cause_change_of_phase',
 'Cause_change_of_position_on_a_scale',
 'Cause_change_of_strength',
 'Cause_emotion',
 'Cause_expansion',
 'Cause_fluidic_motion',
 'Cause_harm',
 'Cause_impact',
 'Cause_motion',
 'Cause_to_amalgamate',
 'Cause_to_be_included',
 'Cause_to_continue',
 'Cause_to_end',
 'Cause_to_fragment',
 'Cause_to_make_progress',
 'Cause_to_perceive',
 'Cause_to_start',
 'Certainty',
 'Change_direction',
 'Change_event_duration',
 'Change_event_time',
 'Change_of_consistency',
 'Change_of_leadership',
 'Change_of_quantity_of_possession',
 'Change_position_on_a_scale',
 'Chaos',
 'Chatting',
 'Choosing',
 'Closure',
 'Clothing',
 'Co-association',
 'Cogitation',
 'Cognitive_connection',
 'Coincidence',
 'Collaboration',
 'Color',
 'Come_together',
 'Coming_to_be',
 'Coming_to_believe',
 'Coming_up_with',
 'Commerce_buy',
 'Commerce_pay',
 'Commerce_scenario',
 'Commercial_transaction',
 'Commitment',
 'Committing_crime',
 'Commonality',
 'Communicate_categorization',
 'Communication',
 'Communication_response',
 'Commutative_process',
 'Compatibility',
 'Competition',
 'Completeness',
 'Compliance',
 'Conduct',
 'Conferring_benefit',
 'Confronting_problem',
 'Connecting_architecture',
 'Connectors',
 'Contacting',
 'Containing',
 'Contingency',
 'Contrition',
 'Control',
 'Convey_importance',
 'Convoy',
 'Correctness',
 'Cotheme',
 'Court_examination',
 'Craft',
 'Create_physical_artwork',
 'Creating',
 'Cure',
 'Custom',
 'Damaging',
 'Dead_or_alive',
 'Death',
 'Deciding',
 'Defending',
 'Degree',
 'Degree_of_processing',
 'Delimitation_of_diversity',
 'Delivery',
 'Deny_or_grant_permission',
 'Departing',
 'Desirability',
 'Desiring',
 'Destiny',
 'Destroying',
 'Detaining',
 'Differentiation',
 'Difficulty',
 'Dimension',
 'Discussion',
 'Dispersal',
 'Distinctiveness',
 'Diversity',
 'Documents',
 'Dominate_situation',
 'Duration_description',
 'Duration_relation',
 'Dynamism',
 'Earnings_and_losses',
 'Economy',
 'Education_teaching',
 'Electricity',
 'Emergency',
 'Emotion_active',
 'Emotion_directed',
 'Emotion_heat',
 'Emotions_of_mental_activity',
 'Emphasizing',
 'Employing',
 'Emptying',
 'Encoding',
 'Endangering',
 'Enforcing',
 'Entity',
 'Evaluative_comparison',
 'Event',
 'Event_instance',
 'Evidence',
 'Evoking',
 'Exchange',
 'Execute_plan',
 'Execution',
 'Exemplar',
 'Existence',
 'Expansion',
 'Expectation',
 'Expend_resource',
 'Expensiveness',
 'Experience_bodily_harm',
 'Experiencer_focus',
 'Experiencer_obj',
 'Expertise',
 'Explaining_the_facts',
 'Exporting',
 'Expressing_publicly',
 'Extreme_value',
 'Fairness_evaluation',
 'Fame',
 'Familiarity',
 'Fear',
 'Feeling',
 'Feigning',
 'Fields',
 'Fining',
 'Finish_competition',
 'Firefighting',
 'First_rank',
 'Fluidic_motion',
 'Food',
 'Food_gathering',
 'Foreign_or_domestic_country',
 'Forging',
 'Forming_relationships',
 'Frequency',
 'Friendly_or_hostile',
 'Front_for',
 'Frugality',
 'Function',
 'Funding',
 'Gesture',
 'Getting',
 'Giving',
 'Giving_birth',
 'Gizmo',
 'Gradable_proximity',
 'Grasp',
 'Guilt_or_innocence',
 'Gusto',
 'Hair_configuration',
 'Halt',
 'Have_as_requirement',
 'Have_associated',
 'Having_or_lacking_access',
 'Hedging',
 'Hiding_objects',
 'Hindering',
 'Hiring',
 'Historic_event',
 'History',
 'Hospitality',
 'Hostile_encounter',
 'Identicality',
 'Idiosyncrasy',
 'Impact',
 'Importance',
 'Importing',
 'Imposing_obligation',
 'Imprisonment',
 'Improvement_or_decline',
 'Inclination',
 'Inclusion',
 'Increment',
 'Individual_history',
 'Information',
 'Infrastructure',
 'Ingest_substance',
 'Ingestion',
 'Ingredients',
 'Inspecting',
 'Instance',
 'Institutionalization',
 'Institutions',
 'Intentionally_act',
 'Intentionally_create',
 'Intoxicants',
 'Invading',
 'Irregular_combatants',
 'Judgment',
 'Judgment_communication',
 'Judgment_direct_address',
 'Judgment_of_intensity',
 'Judicial_body',
 'Just_found_out',
 'Killing',
 'Kinship',
 'Labeling',
 'Labor_product',
 'Launch_process',
 'Law',
 'Law_enforcement_agency',
 'Leadership',
 'Left_to_do',
 'Legal_rulings',
 'Legality',
 'Lending',
 'Level_of_force_exertion',
 'Level_of_force_resistance',
 'Level_of_light',
 'Likelihood',
 'Limitation',
 'Limiting',
 'Linguistic_meaning',
 'Living_conditions',
 'Locale',
 'Locale_by_characteristic_entity',
 'Locale_by_collocation',
 'Locale_by_ownership',
 'Locale_by_use',
 'Locating',
 'Location_in_time',
 'Losing',
 'Make_agreement_on_action',
 'Make_cognitive_connection',
 'Make_compromise',
 'Making_arrangements',
 'Manner',
 'Manner_of_life',
 'Manufacturing',
 'Margin_of_resolution',
 'Mass_motion',
 'Means',
 'Measurable_attributes',
 'Measure_duration',
 'Measure_linear_extent',
 'Measure_volume',
 'Medical_conditions',
 'Medical_interaction_scenario',
 'Medical_intervention',
 'Meet_specifications',
 'Member_of_military',
 'Membership',
 'Memory',
 'Mental_property',
 'Military',
 'Military_operation',
 'Money',
 'Morality_evaluation',
 'Motion',
 'Moving_in_place',
 'Natural_features',
 'Needing',
 'Network',
 'Notability',
 'Objective_influence',
 'Obviousness',
 'Occupy_rank',
 'Offenses',
 'Offering',
 'Omen',
 'Operating_a_system',
 'Operational_testing',
 'Opinion',
 'Opportunity',
 'Optical_image',
 'Ordinal_numbers',
 'Organization',
 'Part_edge',
 'Part_inner_outer',
 'Part_orientational',
 'Part_piece',
 'Part_whole',
 'Partiality',
 'Participation',
 'Path_traveled',
 'Pattern',
 'People',
 'People_by_age',
 'People_by_jurisdiction',
 'People_by_origin',
 'People_by_residence',
 'People_by_vocation',
 'Perception_active',
 'Perception_body',
 'Perception_experience',
 'Performers',
 'Performers_and_roles',
 'Performing_arts',
 'Personal_relationship',
 'Personal_success',
 'Placing',
 'Planned_trajectory',
 'Point_of_dispute',
 'Political_locales',
 'Posing_as',
 'Position_on_a_scale',
 'Possession',
 'Posture',
 'Practice',
 'Praiseworthiness',
 'Precariousness',
 'Predicament',
 'Predicting',
 'Preference',
 'Presence',
 'Preserving',
 'Prevarication',
 'Preventing_or_letting',
 'Process',
 'Process_continue',
 'Process_end',
 'Process_start',
 'Processing_materials',
 'Product_development',
 'Progression',
 'Prohibiting_or_licensing',
 'Project',
 'Proliferating_in_number',
 'Prominence',
 'Proper_reference',
 'Protecting',
 'Protest',
 'Public_services',
 'Purpose',
 'Quantified_mass',
 'Quantity',
 'Quarreling',
 'Questioning',
 'Range',
 'Rank',
 'Ranked_expectation',
 'Rape',
 'Rashness',
 'Rate_quantification',
 'Reading_activity',
 'Reason',
 'Reasoning',
 'Receiving',
 'Records',
 'Recovery',
 'Referring_by_name',
 'Reforming_a_system',
 'Regard',
 'Rejuvenation',
 'Relating_concepts',
 'Relation',
 'Relational_natural_features',
 'Relational_political_locales',
 'Relational_quantity',
 'Relative_time',
 'Releasing',
 'Reliance',
 'Religious_belief',
 'Remainder',
 'Remembering_experience',
 'Removing',
 'Repel',
 'Replacing',
 'Request',
 'Required_event',
 'Rescuing',
 'Research',
 'Reshaping',
 'Residence',
 'Resolve_problem',
 'Respond_to_proposal',
 'Response',
 'Responsibility',
 'Rest',
 'Resurrection',
 'Reveal_secret',
 'Revenge',
 'Rewards_and_punishments',
 'Risky_situation',
 'Rite',
 'Roadways',
 'Rotting',
 'Run_risk',
 'Scrutiny',
 'Secrecy_status',
 'Seeking',
 'Seeking_to_achieve',
 'Self_control',
 'Self_motion',
 'Sending',
 'Sensation',
 'Separating',
 'Sequence',
 'Shapes',
 'Sidereal_appearance',
 'Sign',
 'Sign_agreement',
 'Similarity',
 'Simple_name',
 'Simple_naming',
 'Size',
 'Sleep',
 'Smuggling',
 'Social_connection',
 'Social_interaction_evaluation',
 'Sole_instance',
 'Source_of_getting',
 'Speak_on_topic',
 'Specific_individual',
 'Stage_of_progress',
 'State_continue',
 'State_of_entity',
 'Statement',
 'Stimulus_focus',
 'Store',
 'Storing',
 'Strictness',
 'Suasion',
 'Subjective_influence',
 'Submitting_documents',
 'Substance',
 'Subversion',
 'Success_or_failure',
 'Successful_action',
 'Sufficiency',
 'Suitability',
 'Summarizing',
 'Supply',
 'Supporting',
 'Surpassing',
 'Surrounding',
 'Surviving',
 'System',
 'System_complexity',
 'Taking',
 'Taking_captive',
 'Taking_sides',
 'Taking_time',
 'Talking_into',
 'Telling',
 'Temporal_collocation',
 'Temporal_pattern',
 'Temporal_subregion',
 'Temporary_group',
 'Temporary_stay',
 'Terms_of_agreement',
 'Terrorism',
 'Text',
 'Theft',
 'Thriving',
 'Thwarting',
 'Time_vector',
 'Timespan',
 'Timetable',
 'Tolerating',
 'Topic',
 'Toxic_substance',
 'Transfer',
 'Transition_to_a_quality',
 'Transition_to_state',
 'Traversing',
 'Trial',
 'Trust',
 'Turning_out',
 'Type',
 'Typicality',
 'Undergo_change',
 'Undergo_transformation',
 'Unemployment_rate',
 'Usefulness',
 'Using',
 'Using_resource',
 'Vehicle',
 'Vehicle_subpart',
 'Verdict',
 'Verification',
 'Version_sequence',
 'Violence',
 'Volubility',
 'Waiting',
 'Waver_between_options',
 'Wealthiness',
 'Weapon',
 'Weather',
 'Willingness',
 'Win_prize',
 'Work'
]

frame_index = {frame_name: index for index, frame_name in enumerate(frame_names)}

# Assuming frame_names is a list of frame names ordered by their indices
index_frame = {index: frame_name for index, frame_name in enumerate(frame_names)}
